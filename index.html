<!DOCTYPE html><html><head><title>Appointment Reminders</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Appointment Reminders"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Appointment Reminders</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn to implement appointment reminders in your web app with Twilio. Appointment reminders allow you to automate the process of reaching out to your customers in advance of an upcoming appointment.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Create an Appointment" class="chapter"><div data-title="Introduction" class="step"><h2 id="how-it-works">How It Works</h2>
<p>Ready to implement appointment reminders in your application? Here&#39;s how it works at a high level:</p>
<ol>
<li>An administrator creates an appointment for a future date and time, and stores a customer&#39;s phone number in the database for that appointment</li>
<li>A background process checks the database on a regular interval, looking for appointments that require a reminder to be sent out</li>
<li>At a configured time in advance of the appointment, an SMS reminder is sent out to the customer to remind them of their appointment</li>
</ol>
<h2 id="building-blocks">Building Blocks</h2>
<p>Here are the technologies we&#39;ll use to get this done:</p>
<ul>
<li><a href="http://rubyonrails.org/">Ruby on Rails</a> to create a database-driven web application</li>
<li><a href="/docs/api/rest/sending-sms">The Messages Resource</a> from Twilio&#39;s REST API to send text messages</li>
<li><a href="https://github.com/collectiveidea/delayed_job">Delayed::Job</a> to help us schedule and execute background tasks on a recurring basis</li>
</ul>
<h2 id="how-to-read-this-tutorial">How To Read This Tutorial</h2>
<p>To implement appointment reminders, we will be working through a series of <a href="http://en.wikipedia.org/wiki/User_story">user stories</a> that describe how to fully implement appointment reminders in a web application. We&#39;ll walk through the code required to satisfy each story, and explore what we needed to add at each step.</p>
<p>Let&#39;s get started! Click the right arrow to move on to the next step of the tutorial.</p>
</div><div data-title="About This Tutorial" class="step"><h2 id="about-this-tutorial">About This Tutorial</h2>
<p>In this tutorial, we will be working through a series of <a href="http://en.wikipedia.org/wiki/User_story">user stories</a> that describe how to fully implement account verification in a web application. Our team implemented this example application in about 12 story points (roughly equivalent to 12 working hours).</p>
<p>Let&#39;s get started with our first user story around creating a new user account.</p>
</div><div data-title="The User Story" class="step"><h2>Creating an Appointment</h2><blockquote> 
As a user, I want to create an appointment with a name, guest phone numbers, and a time in the future.</blockquote><p>In order to build an automated appointment reminder app, we probably should start with an appointment. This story requires that we create a bit of UI and a model object to create and save a new <code>Appointment</code> in our system. At a high level, here&#39;s what we will need to add:</p>
<ul>
<li>A form to enter details about the appointment</li>
<li>A route and controller function on the server to render the form </li>
<li>A route and controller function on the server to handle the form POST request</li>
<li>A persistent <code>Appointment</code> model object to store information about the user </li>
</ul>
<p>Let&#39;s start by looking at the model, where we decide what information we want to store with the appointment.</p>
</div><div data-title="Rails Generator" data-file="Gemfile" data-language="ruby" class="step"><h2 id="the-rails-generator">The Rails Generator</h2>
<p>Usually at this point in the tutorial we would build our model, view and controller from scratch (see <a href="/docs/howto/walkthrough/account-verficiation/ruby/rails#2">account verification</a> as an example). But since the appointment model is so straight-forward, and we really just want the basic CRUD scaffolding, we&#39;re going to use the Rails generator for once.</p>
<p><em>A Note about Tools</em></p>
<p>In this app we&#39;re using Rails 4, but it will be very similar for 3 and below. We will also be using the <a href="https://github.com/twilio/twilio-ruby">twilio-ruby</a> helper library. Lastly we use bootstrap to simplify design, and in this case there is a gem that will generate bootstrap-themed views called <a href="https://github.com/seyhunak/twitter-bootstrap-rails">twitter-bootstrap-rails</a>. Please check out these tools when you have a chance, now let&#39;s move on to generating our scaffolding.</p>
<p><em>Generate a Model, View and Controller</em></p>
<p><a href="http://guides.rubyonrails.org/command_line.html#rails-generate">Rails generate</a> is a command-line tool that generates rails components like models, views, tests and more. For our purposes we are going to use the big kahuna generator, <code>scaffold</code> to generate everything at once.</p>
<p>Here&#39;s how we did it. From inside our rails app, we ran:</p>
<pre><code>$ bin/rails generate scaffold Appointment name:string phone_number:string time:datetime
</code></pre><p>This tells our generator to create the &#39;scaffolding&#39; for a resource called Appointment, which has the properties name, phone_number and time. Now let&#39;s go to the model that was generated and add some stuff to it.</p>
</div><div data-title="Appointment Model" data-file="app/models/appointment.rb" data-highlight="1-4" class="step"><h2 id="appointment-model">Appointment Model</h2>
<p>The appointment model is pretty simple out of the box, but since humans will be interacting with it let&#39;s make sure we add some data validation.</p>
<p><em>Data Validation</em></p>
<p>Validations are important since we want to make sure only accurate data is being saved into our database. In this case, we only want to validate that all of our required fields are present. We can do this by creating a <code>validates</code> statement with <code>presence: true</code>.</p>
<p>It is likely that our Appointment Model would be created by an admin person at the site of the appointment. Well it would be great if we could give our admin user some feedback when they create the appointment. Luckily in Rails if we add validations to our models we get error reporting for free with the session&#39;s <code>flash</code> object.</p>
<p>One note: in order to run this demo you would need to run <code>rake db:migrate</code> which would run the migrations in our db/migrate folder. For this tutorial we&#39;re gonna focus on the core concepts but if you want to learn more about migrations you can read the <a href="http://edgeguides.rubyonrails.org/active_record_migrations.html">Rails guide</a> on the subject.</p>
<p>Now we&#39;re ready to move up to the controller level of the application, starting with the HTTP request routes we&#39;ll need.</p>
</div><div data-title="Adding Routes" data-file="config/routes.rb" class="step"><h2 id="routes">Routes</h2>
<p>In a Rails application, <a href="http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default">Resource Routing</a> automatically maps a resource&#39;s CRUD capabilities to its controller. Since our <code>Appointment</code> is an ActiveRecord resource, we can simply tell Rails that we want to use these routes, which will save us some lines of code.</p>
<p>This means that in this one line of code we automatically have an <code>appointment/new</code> route which will automatically render our <code>appointment/new.html.erb</code> file. Let&#39;s take a look at this form up close.</p>
</div><div data-title="New Appointment Form" data-file="app/views/appointments/_form.html.erb" data-language="htmlembedded" class="step"><h2 id="new-appointment-form">New Appointment Form</h2>
<p>When we create a new appointment, we need a guest name, a phone number and a time. By using the rails <code>form_for</code> tag we can bind the form to the model object. This will generate the necessary html markup that will create a new Appointment on submit.</p>
<p>Let&#39;s point out one specific helper tag that Rails gives us for model-bound forms.</p>
</div><div data-title="New Appointment Form" data-file="app/views/appointments/_form.html.erb" data-language="htmlembedded" data-highlight="32-45" class="step"><h2 id="date-and-time">Date and Time</h2>
<p>One potential time-suck is figuring out how to handle the date and time of the appointment. In reality this is two separate user inputs, one for the day and one for the time of the appointment. We need a way to combine these two separate inputs into one paramater on the server-side. Again Rails handles this by giving us the <code>select_data</code> and <code>select_time</code> tags which the server automatically gathers into one paramater that maps to the <code>appointment.time</code> property.</p>
<p>Let&#39;s jump back over to the controller to see what happens when we create this appointment.</p>
</div><div data-title="Handling the Form POST" data-file="app/controllers/appointments_controller.rb" data-highlight="28-43" class="step"><h2 id="handling-the-form-post">Handling the Form POST</h2>
<p>One of the other handy controllers created by our <code>Appointment</code> resource route was <code>appointment/create</code> which handles the POST from our form.</p>
<p>In our controller we take the input from our form and create a new <code>Appointment</code> model. If the appointment is saved to the database successfully, we redirect to the appointment details view which will show the creator the new appointment and allow them to edit or delete it.</p>
<p>Next we&#39;re going to take a look at the generated controllers for edit and delete.</p>
</div></div><div data-title="Interacting with Appointments" class="chapter"><div data-title="Interacting with Appointments" data-file="app/views/appointments/index.html.erb" data-language="htmlembedded" class="step"><h2>Interacting with Appointments</h2><blockquote> 
As a user, I want to view a list of all future appointments, and be able to delete those appointments.</blockquote><p>If you&#39;re an organization that handles a lot of appointments, you probably want to be able to view and manage them in a single interface. That&#39;s what we&#39;ll tackle in this user story. We&#39;ll create a UI to:</p>
<ul>
<li>Show all appointments</li>
<li>Delete individual appoinments</li>
</ul>
<p>Let&#39;s start by looking at the controller.</p>
</div><div data-title="The boring controller" data-file="app/controllers/appointments_controller.rb" data-highlight="4-11" class="step"><h2 id="showing-a-list-of-appointments">Showing a List of Appointments</h2>
<p>At the controller level, all we&#39;ll do is get a list of all the appointments in the database and rendering them with a view. We should also add a prompt if there aren&#39;t any appointments, since this demo relies on there being at least one appointment in the future.</p>
<p>Let&#39;s go back to the template to see our list of appointments.</p>
</div><div data-title="View all Appointments" data-file="app/views/appointments/index.html.erb" data-language="htmlembedded" data-highlight="17-34" class="step"><h2 id="view-all-appointments">View All Appointments</h2>
<p>The index view lists all of the appointments which are automatically ordered by <code>date_created</code>. The only thing we need to add to fulfill our user story is a delete button. We&#39;ll add the edit button just for kicks.</p>
<p><em>URL Helpers</em></p>
<p>You may notice that instead of hard-coding the urls for Edit and Delete we are using a Rails <a href="http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html">URL helper</a>. If you view the rendered markup you will see these paths:</p>
<ul>
<li><code>/appointments/(some ID)/edit</code> for edit</li>
<li><code>/appointments/(some ID)</code> for delete, with an HTTP DELETE method appended to the query</li>
</ul>
<p>These URL helpers can take either an appointment object, or an ID. </p>
<p>There are some other helpers in this code that Rails generates for us. The one I want to point out is the <code>:confirm</code> tag. The confirm tag is a data attribute that interrupts the actual <code>DELETE</code> request with a javascript alert. This is best-practices when calling DELETE on an object. If the user confirms we process the request normally, otherwise no action will be taken.</p>
<p>Now let&#39;s take a look at what happens when an appointment is actually deleted.</p>
</div><div data-title="Looking up an Appointment" data-file="app/controllers/appointments_controller.rb" data-highlight="69-74" class="step"><h2 id="looking-up-the-appointment">Looking up the Appointment</h2>
<p>In this controller we need to pull up an appointment record and then delete it. Let&#39;s take a look at how we&#39;re grabbing the appointment first.</p>
<p>Since we&#39;re probably going to need an appointment record in most of our views, we should just create a private instance method that can be shared across multiple controllers. </p>
<p>In <code>set_appointment</code> we use the id paramater, passed through from the route, to look up the appointment. Then at the top of our controller we use the <code>before_action</code> filter like so:</p>
<pre><code>before_action :set_appointment, only: [:show, :edit, :update, :destroy]
</code></pre><p>This tells our application which controllers to apply this filter to. In this case we only need an appointment when the controller deals with a single appointment. </p>
</div><div data-title="Deleting an Appointment" data-file="app/controllers/appointments_controller.rb" data-highlight="59-67" class="step"><h2 id="deleting-an-appointment">Deleting an Appointment</h2>
<p>Now that we have the appointment, we simply need to call <code>.destroy</code> on it. In a production app you may want to evaluate whether to use <code>.delete</code> instead of destroy, since both are valid ways to delete a database row in Rails. For our purposes we will use the less-eficient destroy for two reasons:</p>
<ol>
<li>It handles database clean-up</li>
<li>It keeps the <code>Appointment</code> in memory, so that we can flash a success message to the user.</li>
</ol>
<p>Now that we can interact with our appointments, let&#39;s dive into sending out reminders when one of these appointments is coming up.</p>
</div></div><div data-title="Send a Reminder" class="chapter"><div data-title="Sending the Reminder" data-file="app/models/appointment.rb" data-language="ruby" class="step"><h2>Sending the Reminder</h2><blockquote> 
As an appointment system, I want to notify a user via SMS an arbitrary interval before a future appointment.</blockquote><p>There are a lot of ways to build this part of our application, but no matter how you implement it there should be two moving parts:</p>
<ul>
<li>A script that checks the database for any appointment that is upcoming, then sends an sms</li>
<li>A worker that runs that script continuously</li>
</ul>
<p>Let&#39;s take a look at how we decided to implement the latter with Delayed::Job.</p>
</div><div data-title="Working with Delayed Job" data-file="Gemfile" data-language="ruby" data-highlight="32-36" class="step"><h2 id="working-with-delayed-job">Working with Delayed::Job</h2>
<p>As we mentioned before, there are a lot of ways to implement a scheduler/worker, but in Rails <code>Delayed::Job</code> is the most established. If you have found a better way to schedule jobs in Rails please let <a href="mailto:help@twilio.com">us know</a>. </p>
<p>Delayed Job needs a backend of some kind to queue the upcoming jobs. Here we have added the ActiveRecord adapter for delayed_job, which uses our database to store the &#39;Jobs&#39; database. There are plenty of <a href="https://github.com/collectiveidea/delayed_job/wiki/Backends">backends supported</a>, so use the correct gem for your application.</p>
<p>Once we included the gem, we need to run <code>bundle install</code> and run the rake task to create the database.</p>
<p><code>rails g delayed_job:active_record</code></p>
<p>You can see all of these steps in the <a href="https://github.com/TwilioDevEd/appointment-reminders-rails">github repo for this project</a>.</p>
<p>Now we&#39;re ready to create the actual job.</p>
</div><div data-title="Sending a Reminder" data-file="app/models/appointment.rb" data-highlight="6-22" class="step"><h2 id="sending-a-reminder">Sending a Reminder</h2>
<p>The next step in sending a reminder to our user is creating the script that we&#39;ll fire at some interval before the appointment time. We will end up wanting to schedule this reminder when the appointment is created, so it makes sense to write it as a method on the Appointment model. </p>
<p>The first thing we do is create a Twilio client that will send our SMS via the <a href="/docs/api/rest/sending-sms">Twilio REST API</a>. We&#39;ll need three things to create the Twilio client:</p>
<ul>
<li>Our Twilio account SID</li>
<li>Our Twilio auth token</li>
<li>A Twilio number in our account that can send text messages</li>
</ul>
<p>All of these can be found in <a href="https://www.twilio.com/user/account/settings">your dashboard</a>. </p>
<p>Then all we need to do to send an sms is use the built in <code>messages.create()</code> to send an SMS to the user&#39;s phone. </p>
<p><em>Model Callback</em></p>
<p>Because we made our reminder script a method on the model we get one very handy tool; a <a href="http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html">callback</a>. By using the <code>before_create</code> callback we ensure that the :reminder gets called whenever an Appointment is created. The last step is making sure this callback always ends up being scheduled by Delayed Job.</p>
</div><div data-title="Scheduling a Reminder" data-file="app/models/appointment.rb" data-highlight="24-28" class="step"><h2 id="scheduling-a-reminder">Scheduling a Reminder</h2>
<p>Well we&#39;re almost done, now all we need to do is write an extremely complicated schedule controller that does the following:</p>
<ul>
<li>Look up each future appointment</li>
<li>Add it to a Jobs table</li>
<li>Check whether it is within the <code>@@REMINDER_TIME</code> interval</li>
<li>Fire the reminder method</li>
</ul>
<p>Oh wait, <a href="https://github.com/collectiveidea/delayed_job#queuing-jobs">Delayed Job</a> does this for free in one handy method called <code>handle_asynchronously</code> which tells Delayed Job to schedule this job whenever this method is fired. Since our job time is dependent on the individual Appointment <code>instance</code> we need to pass the <code>handle_asynchronously</code> method a function that will calculate the time. In this case <code>@@REMINDER_TIME</code> is set to 30 minutes, but you can use any <code>Time</code> interval here.</p>
<p>Now when we create an appointment we will see a new row in the Jobs table, with a time and a method that needs to be fired. Additionally, delayed_job saves errors, and attempts so we can debug any weirdness before it fails. Once it fires a job it removes it from the database, so on a good day we should see an empty database.</p>
<h2 id="all-done">All Done</h2>
<p>Wow, that was quite an undertaking, but in reality we had to write very little code to get automated appointment reminders firing with Twilio. Be sure to check out the project buttons above to download the source for this application, view it on GitHub, or deploy it to Heroku to see it in action for yourself.</p>
<p>We&#39;d also love to hear your feedback on this tutorial - <a href="mailto:help@twilio.com">please reach out to us</a> with any questions you might have.  Thanks for checking out the tutorial!</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="Gemfile" data-mode="ruby">c291cmNlICdodHRwczovL3J1YnlnZW1zLm9yZycKCgojIEJ1bmRsZSBlZGdlIFJhaWxzIGluc3RlYWQ6IGdlbSAncmFpbHMnLCBnaXRodWI6ICdyYWlscy9yYWlscycKZ2VtICdyYWlscycsICc0LjIuMCcKIyBVc2UgcG9zdGdyZXNxbCBhcyB0aGUgZGF0YWJhc2UgZm9yIEFjdGl2ZSBSZWNvcmQKZ2VtICdwZycKIyBVc2UgU0NTUyBmb3Igc3R5bGVzaGVldHMKZ2VtICdzYXNzLXJhaWxzJywgJ34+IDUuMCcKIyBVc2UgVWdsaWZpZXIgYXMgY29tcHJlc3NvciBmb3IgSmF2YVNjcmlwdCBhc3NldHMKZ2VtICd1Z2xpZmllcicsICc+PSAxLjMuMCcKIyBVc2UgQ29mZmVlU2NyaXB0IGZvciAuY29mZmVlIGFzc2V0cyBhbmQgdmlld3MKZ2VtICdjb2ZmZWUtcmFpbHMnLCAnfj4gNC4xLjAnCiMgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9zc3RlcGhlbnNvbi9leGVjanMjcmVhZG1lIGZvciBtb3JlIHN1cHBvcnRlZCBydW50aW1lcwojIGdlbSAndGhlcnVieXJhY2VyJywgcGxhdGZvcm1zOiA6cnVieQoKIyBVc2UganF1ZXJ5IGFzIHRoZSBKYXZhU2NyaXB0IGxpYnJhcnkKZ2VtICdqcXVlcnktcmFpbHMnCiMgVHVyYm9saW5rcyBtYWtlcyBmb2xsb3dpbmcgbGlua3MgaW4geW91ciB3ZWIgYXBwbGljYXRpb24gZmFzdGVyLiBSZWFkIG1vcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWlscy90dXJib2xpbmtzCmdlbSAndHVyYm9saW5rcycKIyBCdWlsZCBKU09OIEFQSXMgd2l0aCBlYXNlLiBSZWFkIG1vcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWlscy9qYnVpbGRlcgpnZW0gJ2pidWlsZGVyJywgJ34+IDIuMCcKIyBidW5kbGUgZXhlYyByYWtlIGRvYzpyYWlscyBnZW5lcmF0ZXMgdGhlIEFQSSB1bmRlciBkb2MvYXBpLgpnZW0gJ3Nkb2MnLCAnfj4gMC40LjAnLCBncm91cDogOmRvYwoKIyBVc2UgVHdpbGlvCmdlbSAndHdpbGlvLXJ1YnknCgojIFVzZSBib290c3RyYXAgdGhlbWVzCmdlbSAndHdpdHRlci1ib290c3RyYXAtcmFpbHMnLCA6Z2l0ID0+ICdnaXQ6Ly9naXRodWIuY29tL3NleWh1bmFrL3R3aXR0ZXItYm9vdHN0cmFwLXJhaWxzLmdpdCcKCiMgVXNlIGRlbGF5ZWQgam9iIGZvciBydW5uaW5nIGJhY2tncm91bmQgam9icwpnZW0gJ2RlbGF5ZWRfam9iX2FjdGl2ZV9yZWNvcmQnCgojIE5lZWQgZGFlbW9ucyB0byBzdGFydCBkZWxheWVkX2pvYgpnZW0gJ2RhZW1vbnMnCgojIFVzZSB3b3JrbGVzcyB0byB1c2UgbGVzcyB3b3JrZXJzIG9uIGhlcm9rdQpnZW0gIndvcmtsZXNzIiwgIn4+IDEuMi4yIgoKIyBVc2UgQWN0aXZlTW9kZWwgaGFzX3NlY3VyZV9wYXNzd29yZAojIGdlbSAnYmNyeXB0JywgJ34+IDMuMS43JwoKIyBVc2UgVW5pY29ybiBhcyB0aGUgYXBwIHNlcnZlcgojIGdlbSAndW5pY29ybicKCiMgVXNlIENhcGlzdHJhbm8gZm9yIGRlcGxveW1lbnQKIyBnZW0gJ2NhcGlzdHJhbm8tcmFpbHMnLCBncm91cDogOmRldmVsb3BtZW50Cgpncm91cCA6ZGV2ZWxvcG1lbnQsIDp0ZXN0IGRvCiAgIyBDYWxsICdieWVidWcnIGFueXdoZXJlIGluIHRoZSBjb2RlIHRvIHN0b3AgZXhlY3V0aW9uIGFuZCBnZXQgYSBkZWJ1Z2dlciBjb25zb2xlCiAgZ2VtICdieWVidWcnCgogICMgQWNjZXNzIGFuIElSQiBjb25zb2xlIG9uIGV4Y2VwdGlvbiBwYWdlcyBvciBieSB1c2luZyA8JT0gY29uc29sZSAlPiBpbiB2aWV3cwogIGdlbSAnd2ViLWNvbnNvbGUnLCAnfj4gMi4wJwoKICAjIFNwcmluZyBzcGVlZHMgdXAgZGV2ZWxvcG1lbnQgYnkga2VlcGluZyB5b3VyIGFwcGxpY2F0aW9uIHJ1bm5pbmcgaW4gdGhlIGJhY2tncm91bmQuIFJlYWQgbW9yZTogaHR0cHM6Ly9naXRodWIuY29tL3JhaWxzL3NwcmluZwogIGdlbSAnc3ByaW5nJwplbmQKCg==</textarea>
<textarea class="saurus-file" data-file="app/models/appointment.rb" data-mode="ruby">Y2xhc3MgQXBwb2ludG1lbnQgPCBBY3RpdmVSZWNvcmQ6OkJhc2UKICB2YWxpZGF0ZXMgOm5hbWUsIHByZXNlbmNlOiB0cnVlCiAgdmFsaWRhdGVzIDpwaG9uZV9udW1iZXIsIHByZXNlbmNlOiB0cnVlCiAgdmFsaWRhdGVzIDp0aW1lLCBwcmVzZW5jZTogdHJ1ZQoKICBhZnRlcl9jcmVhdGUgOnJlbWluZGVyCgogIEBAUkVNSU5ERVJfVElNRSA9IDMwLm1pbnV0ZXMgIyBtaW51dGVzIGJlZm9yZSBhcHBvaW50bWVudAoKICAjIE5vdGlmeSBvdXIgYXBwb2ludG1lbnQgYXR0ZW5kZWUgWCBtaW51dGVzIGJlZm9yZSB0aGUgYXBwb2ludG1lbnQgdGltZQogIGRlZiByZW1pbmRlcgogICAgQHR3aWxpb19udW1iZXIgPSBFTlZbJ1RXSUxJT19OVU1CRVInXQogICAgQGNsaWVudCA9IFR3aWxpbzo6UkVTVDo6Q2xpZW50Lm5ldyBFTlZbJ1RXSUxJT19BQ0NPVU5UX1NJRCddLCBFTlZbJ1RXSUxJT19BVVRIX1RPS0VOJ10KICAgIHRpbWVfc3RyID0gKChzZWxmLnRpbWUpLmxvY2FsdGltZSkuc3RyZnRpbWUoIiVJOiVNJXAgb24gJWIuICVkLCAlWSIpCiAgICByZW1pbmRlciA9ICJIaSAje3NlbGYubmFtZX0uIEp1c3QgYSByZW1pbmRlciB0aGF0IHlvdSBoYXZlIGFuIGFwcG9pbnRtZW50IGNvbWluZyB1cCBhdCAje3RpbWVfc3RyfS4iCiAgICBtZXNzYWdlID0gQGNsaWVudC5hY2NvdW50Lm1lc3NhZ2VzLmNyZWF0ZSgKICAgICAgOmZyb20gPT4gQHR3aWxpb19udW1iZXIsCiAgICAgIDp0byA9PiBzZWxmLnBob25lX251bWJlciwKICAgICAgOmJvZHkgPT4gcmVtaW5kZXIsCiAgICApCiAgICBwdXRzIG1lc3NhZ2UudG8KICBlbmQKCiAgZGVmIHdoZW5fdG9fcnVuCiAgICB0aW1lIC0gQEBSRU1JTkRFUl9USU1FCiAgZW5kCgogIGhhbmRsZV9hc3luY2hyb25vdXNseSA6cmVtaW5kZXIsIDpydW5fYXQgPT4gUHJvYy5uZXcgeyB8aXwgaS53aGVuX3RvX3J1biB9CmVuZA==</textarea>
<textarea class="saurus-file" data-file="config/routes.rb" data-mode="ruby">UmFpbHMuYXBwbGljYXRpb24ucm91dGVzLmRyYXcgZG8KICByZXNvdXJjZXMgOmFwcG9pbnRtZW50cwogIAogICMgWW91IGNhbiBoYXZlIHRoZSByb290IG9mIHlvdXIgc2l0ZSByb3V0ZWQgd2l0aCAicm9vdCIKICByb290ICdhcHBvaW50bWVudHMjd2VsY29tZScKZW5kCg==</textarea>
<textarea class="saurus-file" data-file="app/views/appointments/_form.html.erb" data-mode="html_ruby">PCU9IGZvcm1fZm9yIEBhcHBvaW50bWVudCwgOmh0bWwgPT4geyA6Y2xhc3MgPT4gImZvcm0taG9yaXpvbnRhbCBhcHBvaW50bWVudCIgfSBkbyB8ZnwgJT4KCiAgPCUgaWYgQGFwcG9pbnRtZW50LmVycm9ycy5hbnk/ICU+CiAgICA8ZGl2IGlkPSJlcnJvcl9leHBsIiBjbGFzcz0icGFuZWwgcGFuZWwtZGFuZ2VyIj4KICAgICAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGluZyI+CiAgICAgICAgPGgzIGNsYXNzPSJwYW5lbC10aXRsZSI+PCU9IHBsdXJhbGl6ZShAYXBwb2ludG1lbnQuZXJyb3JzLmNvdW50LCAiZXJyb3IiKSAlPiBwcm9oaWJpdGVkIHRoaXMgYXBwb2ludG1lbnQgZnJvbSBiZWluZyBzYXZlZDo8L2gzPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0icGFuZWwtYm9keSI+CiAgICAgICAgPHVsPgogICAgICAgIDwlIEBhcHBvaW50bWVudC5lcnJvcnMuZnVsbF9tZXNzYWdlcy5lYWNoIGRvIHxtc2d8ICU+CiAgICAgICAgICA8bGk+PCU9IG1zZyAlPjwvbGk+CiAgICAgICAgPCUgZW5kICU+CiAgICAgICAgPC91bD4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8JSBlbmQgJT4KCiAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICA8JT0gZi5sYWJlbCA6bmFtZSwgOmNsYXNzID0+ICdjb250cm9sLWxhYmVsIGNvbC1sZy0yJyAlPgogICAgPGRpdiBjbGFzcz0iY29sLWxnLTEwIj4KICAgICAgPCU9IGYudGV4dF9maWVsZCA6bmFtZSwgOmNsYXNzID0+ICdmb3JtLWNvbnRyb2wnICU+CiAgICA8L2Rpdj4KICAgIDwlPWYuZXJyb3Jfc3Bhbig6bmFtZSkgJT4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgIDwlPSBmLmxhYmVsIDpwaG9uZV9udW1iZXIsIDpjbGFzcyA9PiAnY29udHJvbC1sYWJlbCBjb2wtbGctMicgJT4KICAgIDxkaXYgY2xhc3M9ImNvbC1sZy0xMCI+CiAgICAgIDwlPSBmLnRleHRfZmllbGQgOnBob25lX251bWJlciwgOmNsYXNzID0+ICdmb3JtLWNvbnRyb2wnICU+CiAgICA8L2Rpdj4KICAgIDwlPWYuZXJyb3Jfc3Bhbig6cGhvbmVfbnVtYmVyKSAlPgogIDwvZGl2PgogIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgPCU9IGYubGFiZWwgOnRpbWUsICJUaW1lIGFuZCBEYXRlIiwgOmNsYXNzID0+ICdjb250cm9sLWxhYmVsIGNvbC1sZy0yJyAlPgogICAgPCEtLSBSYWlscyBleHBlY3RzIHRpbWVfc2VsZWN0IHdoZW4gZGVhbGluZyB3aXRoIEFjdGl2ZVJlY29yZCBmb3JtcyAtLT4KICAgIDxkaXYgY2xhc3M9ImNvbC1sZy0yIj4KICAgICAgPCU9IHRpbWVfc2VsZWN0IDphcHBvaW50bWVudCwgOnRpbWUsIHs6Y2xhc3MgPT4gImZvcm0tY29udHJvbCIgfSAlPgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJjb2wtbGctNCI+CiAgICAgIDwlPSBkYXRlX3NlbGVjdCA6YXBwb2ludG1lbnQsIDp0aW1lLCB7OmNsYXNzID0+ICJmb3JtLWNvbnRyb2wiIH0gJT4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iY29sLWxnLTIiPgogICAgICA8JT0gZi50aW1lX3pvbmVfc2VsZWN0IDp0aW1lX3pvbmUsIEFjdGl2ZVN1cHBvcnQ6OlRpbWVab25lLmFsbC5zb3J0LCBkZWZhdWx0OiAiUGFjaWZpYyBUaW1lIChVUyAmIENhbmFkYSkiICU+CiAgICA8L2Rpdj4KICAgIDwlPWYuZXJyb3Jfc3Bhbig6dGltZSkgJT4KICA8L2Rpdj4KCiAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICA8ZGl2IGNsYXNzPSJjb2wtbGctb2Zmc2V0LTIgY29sLWxnLTEwIj4KICAgICAgPCU9IGYuc3VibWl0IG5pbCwgOmNsYXNzID0+ICdidG4gYnRuLXByaW1hcnknICU+CiAgICAgIDwlPSBsaW5rX3RvIHQoJy5jYW5jZWwnLCA6ZGVmYXVsdCA9PiB0KCJoZWxwZXJzLmxpbmtzLmNhbmNlbCIpKSwKICAgICAgICAgICAgICAgIGFwcG9pbnRtZW50c19wYXRoLCA6Y2xhc3MgPT4gJ2J0biBidG4tZGVmYXVsdCcgJT4KICAgIDwvZGl2PgogIDwvZGl2PgoKPCUgZW5kICU+Cg==</textarea>
<textarea class="saurus-file" data-file="app/controllers/appointments_controller.rb" data-mode="ruby">Y2xhc3MgQXBwb2ludG1lbnRzQ29udHJvbGxlciA8IEFwcGxpY2F0aW9uQ29udHJvbGxlcgogIGJlZm9yZV9hY3Rpb24gOnNldF9hcHBvaW50bWVudCwgb25seTogWzpzaG93LCA6ZWRpdCwgOnVwZGF0ZSwgOmRlc3Ryb3ldCgogICMgR0VUIC9hcHBvaW50bWVudHMKICAjIEdFVCAvYXBwb2ludG1lbnRzLmpzb24KICBkZWYgaW5kZXgKICAgIEBhcHBvaW50bWVudHMgPSBBcHBvaW50bWVudC5hbGwKICAgIGlmIEBhcHBvaW50bWVudHMubGVuZ3RoID09IDAKICAgICAgZmxhc2hbOmFsZXJ0XSA9ICJZb3UgaGF2ZSBubyBhcHBvaW50bWVudHMuIENyZWF0ZSBvbmUgbm93IHRvIGdldCBzdGFydGVkLiIKICAgIGVuZAogIGVuZAoKICAjIEdFVCAvYXBwb2ludG1lbnRzLzEKICAjIEdFVCAvYXBwb2ludG1lbnRzLzEuanNvbgogIGRlZiBzaG93CiAgZW5kCgogICMgR0VUIC9hcHBvaW50bWVudHMvbmV3CiAgZGVmIG5ldwogICAgQGFwcG9pbnRtZW50ID0gQXBwb2ludG1lbnQubmV3CiAgICBAbWluX2RhdGUgPSBEYXRlVGltZS5ub3cKICBlbmQKCiAgIyBHRVQgL2FwcG9pbnRtZW50cy8xL2VkaXQKICBkZWYgZWRpdAogIGVuZAoKICAjIFBPU1QgL2FwcG9pbnRtZW50cwogICMgUE9TVCAvYXBwb2ludG1lbnRzLmpzb24KICBkZWYgY3JlYXRlCiAgICBUaW1lLnpvbmUgPSBhcHBvaW50bWVudF9wYXJhbXNbOnRpbWVfem9uZV0KICAgIEBhcHBvaW50bWVudCA9IEFwcG9pbnRtZW50Lm5ldyhhcHBvaW50bWVudF9wYXJhbXMpCiAgICAKICAgIHJlc3BvbmRfdG8gZG8gfGZvcm1hdHwKICAgICAgaWYgQGFwcG9pbnRtZW50LnNhdmUKICAgICAgICBmb3JtYXQuaHRtbCB7IHJlZGlyZWN0X3RvIEBhcHBvaW50bWVudCwgbm90aWNlOiAnQXBwb2ludG1lbnQgd2FzIHN1Y2Nlc3NmdWxseSBjcmVhdGVkLicgfQogICAgICAgIGZvcm1hdC5qc29uIHsgcmVuZGVyIDpzaG93LCBzdGF0dXM6IDpjcmVhdGVkLCBsb2NhdGlvbjogQGFwcG9pbnRtZW50IH0KICAgICAgZWxzZQogICAgICAgIGZvcm1hdC5odG1sIHsgcmVuZGVyIDpuZXcgfQogICAgICAgIGZvcm1hdC5qc29uIHsgcmVuZGVyIGpzb246IEBhcHBvaW50bWVudC5lcnJvcnMsIHN0YXR1czogOnVucHJvY2Vzc2FibGVfZW50aXR5IH0KICAgICAgZW5kCiAgICBlbmQKICBlbmQKCiAgIyBQQVRDSC9QVVQgL2FwcG9pbnRtZW50cy8xCiAgIyBQQVRDSC9QVVQgL2FwcG9pbnRtZW50cy8xLmpzb24KICBkZWYgdXBkYXRlCiAgICByZXNwb25kX3RvIGRvIHxmb3JtYXR8CiAgICAgIGlmIEBhcHBvaW50bWVudC51cGRhdGUoYXBwb2ludG1lbnRfcGFyYW1zKQogICAgICAgIGZvcm1hdC5odG1sIHsgcmVkaXJlY3RfdG8gQGFwcG9pbnRtZW50LCBub3RpY2U6ICdBcHBvaW50bWVudCB3YXMgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQuJyB9CiAgICAgICAgZm9ybWF0Lmpzb24geyByZW5kZXIgOnNob3csIHN0YXR1czogOm9rLCBsb2NhdGlvbjogQGFwcG9pbnRtZW50IH0KICAgICAgZWxzZQogICAgICAgIGZvcm1hdC5odG1sIHsgcmVuZGVyIDplZGl0IH0KICAgICAgICBmb3JtYXQuanNvbiB7IHJlbmRlciBqc29uOiBAYXBwb2ludG1lbnQuZXJyb3JzLCBzdGF0dXM6IDp1bnByb2Nlc3NhYmxlX2VudGl0eSB9CiAgICAgIGVuZAogICAgZW5kCiAgZW5kCgogICMgREVMRVRFIC9hcHBvaW50bWVudHMvMQogICMgREVMRVRFIC9hcHBvaW50bWVudHMvMS5qc29uCiAgZGVmIGRlc3Ryb3kKICAgIEBhcHBvaW50bWVudC5kZXN0cm95CiAgICByZXNwb25kX3RvIGRvIHxmb3JtYXR8CiAgICAgIGZvcm1hdC5odG1sIHsgcmVkaXJlY3RfdG8gYXBwb2ludG1lbnRzX3VybCwgbm90aWNlOiAnQXBwb2ludG1lbnQgd2FzIHN1Y2Nlc3NmdWxseSBkZXN0cm95ZWQuJyB9CiAgICAgIGZvcm1hdC5qc29uIHsgaGVhZCA6bm9fY29udGVudCB9CiAgICBlbmQKICBlbmQKCiAgcHJpdmF0ZQogICAgIyBVc2UgY2FsbGJhY2tzIHRvIHNoYXJlIGNvbW1vbiBzZXR1cCBvciBjb25zdHJhaW50cyBiZXR3ZWVuIGFjdGlvbnMuCiAgICAjIFNlZSBhYm92ZSAtLS0+IGJlZm9yZV9hY3Rpb24gOnNldF9hcHBvaW50bWVudCwgb25seTogWzpzaG93LCA6ZWRpdCwgOnVwZGF0ZSwgOmRlc3Ryb3ldCiAgICBkZWYgc2V0X2FwcG9pbnRtZW50CiAgICAgIEBhcHBvaW50bWVudCA9IEFwcG9pbnRtZW50LmZpbmQocGFyYW1zWzppZF0pCiAgICBlbmQKCiAgICAjIE5ldmVyIHRydXN0IHBhcmFtZXRlcnMgZnJvbSB0aGUgc2NhcnkgaW50ZXJuZXQsIG9ubHkgYWxsb3cgdGhlIHdoaXRlIGxpc3QgdGhyb3VnaC4KICAgIGRlZiBhcHBvaW50bWVudF9wYXJhbXMKICAgICAgcGFyYW1zLnJlcXVpcmUoOmFwcG9pbnRtZW50KS5wZXJtaXQoOm5hbWUsIDpwaG9uZV9udW1iZXIsIDp0aW1lLCA6dGltZV96b25lKQogICAgZW5kCmVuZAo=</textarea>
<textarea class="saurus-file" data-file="app/views/appointments/index.html.erb" data-mode="html_ruby">PCUtIG1vZGVsX2NsYXNzID0gQXBwb2ludG1lbnQgLSU+CjxkaXYgY2xhc3M9InBhZ2UtaGVhZGVyIj4KICA8aDE+PCU9dCAnLnRpdGxlJywgOmRlZmF1bHQgPT4gbW9kZWxfY2xhc3MubW9kZWxfbmFtZS5odW1hbi5wbHVyYWxpemUudGl0bGVpemUgJT48L2gxPgo8L2Rpdj4KPHRhYmxlIGNsYXNzPSJ0YWJsZSB0YWJsZS1zdHJpcGVkIj4KICA8dGhlYWQ+CiAgICA8dHI+CiAgICAgIDx0aD48JT0gbW9kZWxfY2xhc3MuaHVtYW5fYXR0cmlidXRlX25hbWUoOmlkKSAlPjwvdGg+CiAgICAgIDx0aD48JT0gbW9kZWxfY2xhc3MuaHVtYW5fYXR0cmlidXRlX25hbWUoOm5hbWUpICU+PC90aD4KICAgICAgPHRoPjwlPSBtb2RlbF9jbGFzcy5odW1hbl9hdHRyaWJ1dGVfbmFtZSg6cGhvbmVfbnVtYmVyKSAlPjwvdGg+CiAgICAgIDx0aD48JT0gbW9kZWxfY2xhc3MuaHVtYW5fYXR0cmlidXRlX25hbWUoOnRpbWUpICU+PC90aD4KICAgICAgPHRoPjwlPSBtb2RlbF9jbGFzcy5odW1hbl9hdHRyaWJ1dGVfbmFtZSg6Y3JlYXRlZF9hdCkgJT48L3RoPgogICAgICA8dGg+PCU9dCAnLmFjdGlvbnMnLCA6ZGVmYXVsdCA9PiB0KCJoZWxwZXJzLmFjdGlvbnMiKSAlPjwvdGg+CiAgICA8L3RyPgogIDwvdGhlYWQ+CiAgPHRib2R5PgogICAgPCUgQGFwcG9pbnRtZW50cy5lYWNoIGRvIHxhcHBvaW50bWVudHwgJT4KICAgICAgPHRyPgogICAgICAgIDx0ZD48JT0gbGlua190byBhcHBvaW50bWVudC5pZCwgYXBwb2ludG1lbnRfcGF0aChhcHBvaW50bWVudCkgJT48L3RkPgogICAgICAgIDx0ZD48JT0gYXBwb2ludG1lbnQubmFtZSAlPjwvdGQ+CiAgICAgICAgPHRkPjwlPSBhcHBvaW50bWVudC5waG9uZV9udW1iZXIgJT48L3RkPgogICAgICAgIDx0ZD48JT0gYXBwb2ludG1lbnQudGltZSAlPjwvdGQ+CiAgICAgICAgPHRkPjwlPWwgYXBwb2ludG1lbnQuY3JlYXRlZF9hdCAlPjwvdGQ+CiAgICAgICAgPHRkPgogICAgICAgICAgPCU9IGxpbmtfdG8gIkVkaXQiLCAKICAgICAgICAgICAgICAgICAgICAgIGVkaXRfYXBwb2ludG1lbnRfcGF0aChhcHBvaW50bWVudCksIDpjbGFzcyA9PiAnYnRuIGJ0bi1kZWZhdWx0IGJ0bi14cycgJT4KICAgICAgICAgIDwlPSBsaW5rX3RvICJEZWxldGUiLAogICAgICAgICAgICAgICAgICAgICAgYXBwb2ludG1lbnRfcGF0aChhcHBvaW50bWVudCksCiAgICAgICAgICAgICAgICAgICAgICA6bWV0aG9kID0+IDpkZWxldGUsCiAgICAgICAgICAgICAgICAgICAgICA6ZGF0YSA9PiB7IDpjb25maXJtID0+IHQoJy5jb25maXJtJywgOmRlZmF1bHQgPT4gdCgiaGVscGVycy5saW5rcy5jb25maXJtIiwgOmRlZmF1bHQgPT4gJ0FyZSB5b3Ugc3VyZT8nKSkgfSwKICAgICAgICAgICAgICAgICAgICAgIDpjbGFzcyA9PiAnYnRuIGJ0bi14cyBidG4tZGFuZ2VyJyAlPgogICAgICAgIDwvdGQ+CiAgICAgIDwvdHI+CiAgICA8JSBlbmQgJT4KICA8L3Rib2R5Pgo8L3RhYmxlPgoKPCU9IGxpbmtfdG8gIk5ldyIsCiAgICAgICAgICAgIG5ld19hcHBvaW50bWVudF9wYXRoLAogICAgICAgICAgICA6Y2xhc3MgPT4gJ2J0biBidG4tcHJpbWFyeScgJT4K</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>